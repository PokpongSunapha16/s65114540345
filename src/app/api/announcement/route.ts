import { NextResponse } from 'next/server';
import prisma from '@/lib/prisma'; // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ import Prisma Client ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

export async function GET() {
  try {
    // ‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á announcement
    const latestAnnouncement = await prisma.announcement.findFirst({
      orderBy: { updatedAt: 'desc' }, // ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    });

    if (!latestAnnouncement) {
      return NextResponse.json({ content: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ', updatedAt: new Date() });
    }

    return NextResponse.json({
      content: latestAnnouncement.content,
      updatedAt: latestAnnouncement.updatedAt,
    });
  } catch (error) {
    console.error('üö® Error fetching announcement:', error);
    return NextResponse.json({ error: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ' }, { status: 500 });
  }
}
